<% include partials/header.ejs %>
<div id="editModal" class="modal fade" tabindex="-1">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">Edit</h5>
				<button type="button" class="close" data-dismiss="modal">&times;</button>
			</div>
			<div class="modal-body">
				<ul class="list-group list-group-flush mb-3">
					<li class="list-group-item">Status: <em id="status"></em></li>
					<li class="list-group-item">Time Req: <em id="time"></em></li>
					<li class="list-group-item">Notes: <em id="notes"></em></li>
					<li class="list-group-item wsn">Desc: <em id="desc"></em></li>
				</ul>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
				<button type="button" class="btn btn-primary">Save changes</button>
			</div>
		</div>
	</div>
</div>
<div class="index-wrapper mt-0 pr-4 container-fluid task-group bg-dark">
	<div id="cont" class="row p-2 pb-0 align-items-start cont">
		<% if (tasks) {%>
			<% if (tasks.length > 0) {%>
				<% tasks.forEach((task, index) => { %>
					<div id="<%= task.id %>" class="card mr-3 shadow-lg" data-taskinfo='{"id": "<%= task.id %>", "bucket": "<%= task.bucket %>", "task": "<%= task.task %>", "status": "<%= task.status %>", "time": "<%= task.time %>", "notes": "<%= task.notes %>", "description": "<%= task.description %>"}'>
						<div id="bucket" class="card-header"><%= task.bucket %></div>
						<div class="card-body">
							<h5 id="task" class="card-title"><%= task.task %></h5>
							<ul class="list-group list-group-flush mb-3">
								<li class="list-group-item bg-dark p-1 text-light align-middle border-top border-black"><label class="m-0 bg-light rounded rounded-lg p-1 text-dark" for="status">Status:</label><em id="status"> <%= task.status %></em></li>
								<li class="list-group-item bg-dark p-1 text-light align-middle border-top"><label class="m-0 bg-light rounded rounded-lg p-1 text-dark" for="time">Time Req:</label><em id="time"> <%= task.time %></em></li>
								<li class="list-group-item">Notes: <em id="notes"><%= task.notes %></em></li>
								<li class="list-group-item wsn">Desc: <em id="desc"><%= task.description %></em></li>
							</ul>
							<a href="/delete/<%= task.id %>" class="btn btn-sm btn-danger">Delete</a>
							<a href="/edit/<%= task.id %>" rel="noopener" class="btn btn-sm btn-success">Edit</a>
						</div>
					</div>
				<% }) %>
			<% } else { %>
				<p class="text-center">No tasks found. Go <a href="/add" >here</a> to add tasks.</p>
			<% } %>
	<% } %>
</div>
</div>
</div>
<script type="application/x-javascript" src="js/index-html.js"></script>
<script type="text/javascript">
	(function() {
		function scrollHorizontally(e) {
			e = window.event || e;
			var delta = Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail)));
			document.getElementById('cont').scrollLeft -= (delta*40); // Multiplied by 40
			e.preventDefault();
		}
		if (document.getElementById('cont').addEventListener) {
			// IE9, Chrome, Safari, Opera
			document.getElementById('cont').addEventListener("mousewheel", scrollHorizontally, false);
			// Firefox
			document.getElementById('cont').addEventListener("DOMMouseScroll", scrollHorizontally, false);
		} else {
			// IE 6/7/8
			document.getElementById('cont').attachEvent("onmousewheel", scrollHorizontally);
		}
	})();
</script>
</body>
</html>
